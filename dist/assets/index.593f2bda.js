var ge=Object.defineProperty,he=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var te=(e,t,l)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,M=(e,t)=>{for(var l in t||(t={}))ye.call(t,l)&&te(e,l,t[l]);if(oe)for(var l of oe(t))ve.call(t,l)&&te(e,l,t[l]);return e},W=(e,t)=>he(e,be(t));var z=(e,t,l)=>new Promise((d,a)=>{var s=u=>{try{n(l.next(u))}catch(i){a(i)}},o=u=>{try{n(l.throw(u))}catch(i){a(i)}},n=u=>u.done?d(u.value):Promise.resolve(u.value).then(s,o);n((l=l.apply(e,t)).next())});import{q as Z,Q as G,j as r,bg as Ce,a as O,bj as ke,cL as we,m as C,dg as Me,cp as $e,dh as Se,bo as He,bM as Fe,w as y,di as _e,e as $,x as de,a0 as Oe,a_ as ue,a1 as D,R as T,S as g,bZ as Be,o as h,i as k,H as m,E as De,f as q,bt as Te,V as _,br as Pe,b6 as Ne,b as Q,M as Re,k as L,p as E,J,t as X,Y as I,c_ as We,bL as xe,aI as Y,aT as pe,aR as Ee,c$ as Ie,T as ne,U as ae,W as le,X as re,D as fe,cO as Le,aG as A,aJ as je,d0 as Ve,Z as ze,cH as Ae,be as se,bz as Ue,O as qe,C as Xe,h as U,bC as Ye}from"./index.adfa4d48.js";import{D as Je}from"./siteSetting.c485f07c.js";import{F as Ze,b as Ge,c as Qe,u as Ke}from"./index.f1282f56.js";import{b as eo}from"./useContentViewHeight.1a91dd28.js";import{h as oo}from"./header.d801b988.js";import"./index.e8d27363.js";const{t:ie}=Z(),to={visible:{type:Boolean},scrollTop:{type:Boolean,default:!0},height:{type:Number},minHeight:{type:Number},draggable:{type:Boolean,default:!0},centered:{type:Boolean},cancelText:{type:String,default:ie("common.cancelText")},okText:{type:String,default:ie("common.okText")},closeFunc:Function},K=Object.assign({},to,{defaultFullscreen:{type:Boolean},canFullscreen:{type:Boolean,default:!0},wrapperFooterOffset:{type:Number,default:0},helpMessage:[String,Array],useWrapper:{type:Boolean,default:!0},loading:{type:Boolean},loadingTip:{type:String},showCancelBtn:{type:Boolean,default:!0},showOkBtn:{type:Boolean,default:!0},wrapperProps:Object,afterClose:Function,bodyStyle:Object,closable:{type:Boolean,default:!0},closeIcon:Object,confirmLoading:{type:Boolean},destroyOnClose:{type:Boolean},footer:Object,getContainer:Function,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},maskStyle:Object,okType:{type:String,default:"primary"},okButtonProps:Object,cancelButtonProps:Object,title:{type:String},visible:{type:Boolean},width:[String,Number],wrapClassName:{type:String},zIndex:{type:Number}});function no(e){const t=(a,s)=>getComputedStyle(a)[s],l=a=>{if(!a)return;a.setAttribute("data-drag",r(e.draggable));const s=a.querySelector(".ant-modal-header"),o=a.querySelector(".ant-modal");!s||!o||!r(e.draggable)||(s.style.cursor="move",s.onmousedown=n=>{if(!n)return;const u=n.clientX,i=n.clientY,p=document.body.clientWidth,f=document.documentElement.clientHeight,b=o.offsetWidth,w=o.offsetHeight,S=o.offsetLeft,H=p-o.offsetLeft-b,F=o.offsetTop,j=f-o.offsetTop-w,B=t(o,"left"),P=t(o,"top");let N=+B,R=+P;B.includes("%")?(N=+document.body.clientWidth*(+B.replace(/%/g,"")/100),R=+document.body.clientHeight*(+P.replace(/%/g,"")/100)):(N=+B.replace(/px/g,""),R=+P.replace(/px/g,"")),document.onmousemove=function(V){let c=V.clientX-u,v=V.clientY-i;-c>S?c=-S:c>H&&(c=H),-v>F?v=-F:v>j&&(v=j),o.style.cssText+=`;left:${c+N}px;top:${v+R}px;`},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}})},d=()=>{const a=document.querySelectorAll(".ant-modal-wrap");for(const s of Array.from(a)){if(!s)continue;const o=t(s,"display"),n=s.getAttribute("data-drag");o!=="none"&&(n===null||r(e.destroyOnClose))&&l(s)}};G(()=>{!r(e.visible)||!r(e.draggable)||Ce(()=>{d()},30)})}function ao(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!$e(e)}var lo=O({name:"Modal",inheritAttrs:!1,props:K,emits:["cancel"],setup(e,{slots:t,emit:l}){const{visible:d,draggable:a,destroyOnClose:s}=ke(e),o=we();no({visible:d,destroyOnClose:s,draggable:a});const n=u=>{l("cancel",u)};return()=>{let u;const i=W(M(M({},r(o)),e),{onCancel:n});return C(Se,i,ao(u=Me(t))?u:{default:()=>[u]})}}});const ro=Symbol();function so(e){return He(e,ro)}const io={loading:{type:Boolean},useWrapper:{type:Boolean,default:!0},modalHeaderHeight:{type:Number,default:57},modalFooterHeight:{type:Number,default:74},minHeight:{type:Number,default:200},height:{type:Number},footerOffset:{type:Number,default:0},visible:{type:Boolean},fullScreen:{type:Boolean},loadingTip:{type:String}},co=O({name:"ModalWrapper",components:{ScrollContainer:Fe},inheritAttrs:!1,props:io,emits:["height-change","ext-height"],setup(e,{emit:t}){const l=y(null),d=y(null),a=y(0),s=y(0);let o=0;eo(i.bind(null,!1)),_e(d,()=>{i()},{attributes:!0,subtree:!0}),so({redoModalHeight:i});const n=$(()=>({minHeight:`${e.minHeight}px`,[e.fullScreen?"height":"maxHeight"]:`${r(a)}px`}));G(()=>{e.useWrapper&&i()}),de(()=>e.fullScreen,p=>{i(),p?s.value=a.value:a.value=s.value}),Oe(()=>{const{modalHeaderHeight:p,modalFooterHeight:f}=e;t("ext-height",p+f)}),ue(()=>{});function u(){return z(this,null,function*(){D(()=>{var f;const p=r(l);!p||(f=p==null?void 0:p.scrollTo)==null||f.call(p,0)})})}function i(){return z(this,null,function*(){if(!e.visible)return;const p=r(l);if(!p)return;const f=p.$el.parentElement;if(!!f){f.style.padding="0",yield D();try{const b=f.parentElement&&f.parentElement.parentElement;if(!b)return;const w=getComputedStyle(b).top,S=Number.parseInt(w);let H=window.innerHeight-S*2+(e.footerOffset||0)-e.modalFooterHeight-e.modalHeaderHeight;S<40&&(H-=26),yield D();const F=r(d);if(!F)return;yield D(),o=F.scrollHeight,e.fullScreen?a.value=window.innerHeight-e.modalFooterHeight-e.modalHeaderHeight-28:a.value=e.height?e.height:o>H?H:o,t("height-change",r(a))}catch(b){}}})}return{wrapperRef:l,spinRef:d,spinStyle:n,scrollTop:u,setModalHeight:i}}}),uo=["loading-tip"];function po(e,t,l,d,a,s){const o=g("ScrollContainer"),n=Be("loading");return h(),k(o,{ref:"wrapperRef"},{default:m(()=>[De((h(),q("div",{ref:"spinRef",style:Te(e.spinStyle),"loading-tip":e.loadingTip},[_(e.$slots,"default")],12,uo)),[[n,e.loading]])]),_:3},512)}var fo=T(co,[["render",po]]);const mo=O({name:"ModalClose",components:{Tooltip:Pe,FullscreenExitOutlined:Ze,FullscreenOutlined:Ge,CloseOutlined:Ne},props:{canFullscreen:{type:Boolean,default:!0},fullScreen:{type:Boolean}},emits:["cancel","fullscreen"],setup(e,{emit:t}){const{prefixCls:l}=Q("basic-modal-close"),{t:d}=Z(),a=$(()=>[l,`${l}--custom`,{[`${l}--can-full`]:e.canFullscreen}]);function s(n){t("cancel",n)}function o(n){n==null||n.stopPropagation(),n==null||n.preventDefault(),t("fullscreen")}return{t:d,getClass:a,prefixCls:l,handleCancel:s,handleFullScreen:o}}});function go(e,t,l,d,a,s){const o=g("FullscreenExitOutlined"),n=g("Tooltip"),u=g("FullscreenOutlined"),i=g("CloseOutlined");return h(),q("div",{class:E(e.getClass)},[e.canFullscreen?(h(),q(Re,{key:0},[e.fullScreen?(h(),k(n,{key:0,title:e.t("component.modal.restore"),placement:"bottom"},{default:m(()=>[C(o,{role:"full",onClick:e.handleFullScreen},null,8,["onClick"])]),_:1},8,["title"])):(h(),k(n,{key:1,title:e.t("component.modal.maximize"),placement:"bottom"},{default:m(()=>[C(u,{role:"close",onClick:e.handleFullScreen},null,8,["onClick"])]),_:1},8,["title"]))],64)):L("",!0),C(n,{title:e.t("component.modal.close"),placement:"bottom"},{default:m(()=>[C(i,{onClick:e.handleCancel},null,8,["onClick"])]),_:1},8,["title"])],2)}var ho=T(mo,[["render",go]]);const bo=O({name:"BasicModalFooter",props:K,emits:["ok","cancel"],setup(e,{emit:t}){function l(a){t("ok",a)}function d(a){t("cancel",a)}return{handleOk:l,handleCancel:d}}});function yo(e,t,l,d,a,s){const o=g("a-button");return h(),q("div",null,[_(e.$slots,"insertFooter"),e.showCancelBtn?(h(),k(o,I({key:0},e.cancelButtonProps,{onClick:e.handleCancel}),{default:m(()=>[J(X(e.cancelText),1)]),_:1},16,["onClick"])):L("",!0),_(e.$slots,"centerFooter"),e.showOkBtn?(h(),k(o,I({key:1,type:e.okType,onClick:e.handleOk,loading:e.confirmLoading},e.okButtonProps),{default:m(()=>[J(X(e.okText),1)]),_:1},16,["type","onClick","loading"])):L("",!0),_(e.$slots,"appendFooter")])}var vo=T(bo,[["render",yo]]);const Co=O({name:"BasicModalHeader",components:{BasicTitle:We},props:{helpMessage:{type:[String,Array]},title:{type:String}},emits:["dblclick"]});function ko(e,t,l,d,a,s){const o=g("BasicTitle");return h(),k(o,{helpMessage:e.helpMessage},{default:m(()=>[J(X(e.title),1)]),_:1},8,["helpMessage"])}var wo=T(Co,[["render",ko]]);function Mo(e){const t=y(!1),l=$(()=>{const a=r(e.wrapClassName)||"";return r(t)?`fullscreen-modal ${a} `:r(a)});function d(a){a&&a.stopPropagation(),t.value=!r(t)}return{getWrapClassName:l,handleFullScreen:d,fullScreenRef:t}}const $o=O({name:"BasicModal",components:{Modal:lo,ModalWrapper:fo,ModalClose:ho,ModalFooter:vo,ModalHeader:wo},inheritAttrs:!1,props:K,emits:["visible-change","height-change","cancel","ok","register","update:visible"],setup(e,{emit:t,attrs:l}){const d=y(!1),a=y(null),s=y(null),{prefixCls:o}=Q("basic-modal"),n=y(0),u={setModalProps:B,emitVisible:void 0,redoModalHeight:()=>{D(()=>{r(s)&&r(s).setModalHeight()})}},i=pe();i&&t("register",u,i.uid);const p=$(()=>M(M({},e),r(a))),{handleFullScreen:f,getWrapClassName:b,fullScreenRef:w}=Mo({modalWrapperRef:s,extHeightRef:n,wrapClassName:xe(p.value,"wrapClassName")}),S=$(()=>{const c=W(M({},r(p)),{visible:r(d),okButtonProps:void 0,cancelButtonProps:void 0,title:void 0});return W(M({},c),{wrapClassName:r(b)})}),H=$(()=>{const c=W(M(M({},l),r(p)),{visible:r(d),wrapClassName:r(b)});return r(w)?Y(c,["height","title"]):Y(c,"title")}),F=$(()=>{if(!r(w))return r(S).height});G(()=>{d.value=!!e.visible,w.value=!!e.defaultFullscreen}),de(()=>r(d),c=>{var v;t("visible-change",c),t("update:visible",c),i&&((v=u.emitVisible)==null||v.call(u,c,i.uid)),D(()=>{e.scrollTop&&c&&r(s)&&r(s).scrollTop()})},{immediate:!1});function j(c){return z(this,null,function*(){var v,ee;if(c==null||c.stopPropagation(),!((ee=(v=c.target)==null?void 0:v.classList)!=null&&ee.contains(o+"-close--custom"))){if(e.closeFunc&&Ee(e.closeFunc)){const me=yield e.closeFunc();d.value=!me;return}d.value=!1,t("cancel",c)}})}function B(c){a.value=Ie(r(a)||{},c),Reflect.has(c,"visible")&&(d.value=!!c.visible),Reflect.has(c,"defaultFullscreen")&&(w.value=!!c.defaultFullscreen)}function P(c){t("ok",c)}function N(c){t("height-change",c)}function R(c){n.value=c}function V(c){!e.canFullscreen||(c.stopPropagation(),f(c))}return{handleCancel:j,getBindValue:H,getProps:S,handleFullScreen:f,fullScreenRef:w,getMergeProps:p,handleOk:P,visibleRef:d,omit:Y,modalWrapperRef:s,handleExtHeight:R,handleHeightChange:N,handleTitleDbClick:V,getWrapperHeight:F}}});function So(e,t,l,d,a,s){const o=g("ModalClose"),n=g("ModalHeader"),u=g("ModalFooter"),i=g("ModalWrapper"),p=g("Modal");return h(),k(p,I(e.getBindValue,{onCancel:e.handleCancel}),ne({default:m(()=>[C(i,I({useWrapper:e.getProps.useWrapper,footerOffset:e.wrapperFooterOffset,fullScreen:e.fullScreenRef,ref:"modalWrapperRef",loading:e.getProps.loading,"loading-tip":e.getProps.loadingTip,minHeight:e.getProps.minHeight,height:e.getWrapperHeight,visible:e.visibleRef,modalFooterHeight:e.footer!==void 0&&!e.footer?0:void 0},e.omit(e.getProps.wrapperProps,"visible","height","modalFooterHeight"),{onExtHeight:e.handleExtHeight,onHeightChange:e.handleHeightChange}),{default:m(()=>[_(e.$slots,"default")]),_:3},16,["useWrapper","footerOffset","fullScreen","loading","loading-tip","minHeight","height","visible","modalFooterHeight","onExtHeight","onHeightChange"])]),_:2},[e.$slots.closeIcon?void 0:{name:"closeIcon",fn:m(()=>[C(o,{canFullscreen:e.getProps.canFullscreen,fullScreen:e.fullScreenRef,onCancel:e.handleCancel,onFullscreen:e.handleFullScreen},null,8,["canFullscreen","fullScreen","onCancel","onFullscreen"])]),key:"0"},e.$slots.title?void 0:{name:"title",fn:m(()=>[C(n,{helpMessage:e.getProps.helpMessage,title:e.getMergeProps.title,onDblclick:e.handleTitleDbClick},null,8,["helpMessage","title","onDblclick"])]),key:"1"},e.$slots.footer?void 0:{name:"footer",fn:m(()=>[C(u,I(e.getBindValue,{onOk:e.handleOk,onCancel:e.handleCancel}),ne({_:2},[ae(Object.keys(e.$slots),f=>({name:f,fn:m(b=>[_(e.$slots,f,le(re(b||{})))])}))]),1040,["onOk","onCancel"])]),key:"2"},ae(Object.keys(e.omit(e.$slots,"default")),f=>({name:f,fn:m(b=>[_(e.$slots,f,le(re(b||{})))])}))]),1040,["onCancel"])}var Ho=T($o,[["render",So]]);const x=fe({}),ce=fe({});function Fo(){const e=y(null),t=y(!1),l=y("");function d(o,n){if(!pe())throw new Error("useModal() can only be used inside setup() or functional components!");l.value=n,ue(()=>{e.value=null,t.value=!1,x[r(l)]=null}),!(r(t)&&Le()&&o===r(e))&&(e.value=o,t.value=!0,o.emitVisible=(u,i)=>{ce[i]=u})}const a=()=>{const o=r(e);return o||Ve("useModal instance is undefined!"),o},s={setModalProps:o=>{var n;(n=a())==null||n.setModalProps(o)},getVisible:$(()=>ce[~~r(l)]),redoModalHeight:()=>{var o,n;(n=(o=a())==null?void 0:o.redoModalHeight)==null||n.call(o)},openModal:(o=!0,n,u=!0)=>{var f;if((f=a())==null||f.setModalProps({visible:o}),!n)return;const i=r(l);if(u){x[i]=null,x[i]=A(n);return}je(A(x[i]),A(n))||(x[i]=A(n))},closeModal:()=>{var o;(o=a())==null||o.setModalProps({visible:!1})}};return[d,s]}ze(Ho);const _o=O({name:"UserDropdown",components:{Dropdown:Ae,Menu:se,MenuItem:Qe(()=>Ue(()=>import("./DropMenuItem.270f548f.js"),["assets/DropMenuItem.270f548f.js","assets/index.adfa4d48.js","assets/index.86a58d3a.css"])),MenuDivider:se.Divider},props:{theme:qe.oneOf(["dark","light"])},setup(){const{prefixCls:e}=Q("header-user-dropdown"),{t}=Z(),{getShowDoc:l}=Ke(),d=Xe(),a=$(()=>{const{realName:i="",avatar:p,desc:f}=d.getUserInfo||{};return{realName:i,avatar:p||oo,desc:f}}),[s]=Fo();function o(){d.confirmLoginOut()}function n(){Ye(Je)}function u(i){switch(i.key){case"logout":o();break;case"doc":n();break}}return{prefixCls:e,t,getUserInfo:a,handleMenuClick:u,getShowDoc:l,register:s}}}),Oo=["src"];function Bo(e,t,l,d,a,s){const o=g("MenuItem"),n=g("MenuDivider"),u=g("Menu"),i=g("Dropdown");return h(),k(i,{placement:"bottomLeft",overlayClassName:`${e.prefixCls}-dropdown-overlay`},{overlay:m(()=>[C(u,{onClick:e.handleMenuClick},{default:m(()=>[e.getShowDoc?(h(),k(o,{key:"doc",text:e.t("layout.header.dropdownItemDoc"),icon:"ion:document-text-outline"},null,8,["text"])):L("",!0),e.getShowDoc?(h(),k(n,{key:1})):L("",!0),C(o,{key:"logout",text:e.t("layout.header.dropdownItemLoginOut"),icon:"ion:power-outline"},null,8,["text"])]),_:1},8,["onClick"])]),default:m(()=>[U("span",{class:E([[e.prefixCls,`${e.prefixCls}--${e.theme}`],"flex"])},[U("img",{class:E(`${e.prefixCls}__header`),src:e.getUserInfo.avatar},null,10,Oo),U("span",{class:E(`${e.prefixCls}__info hidden md:block`)},[U("span",{class:E([`${e.prefixCls}__name  `,"truncate"])},X(e.getUserInfo.realName),3)],2)],2)]),_:1},8,["overlayClassName"])}var Eo=T(_o,[["render",Bo]]);export{Eo as default};
