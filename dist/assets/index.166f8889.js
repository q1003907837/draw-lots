import{aA as D,Q as J,a as B,a4 as K,w as _,v as H,e as U,cs as Y,ab as Z,aO as aa,x as W,a1 as I,a0 as ta,b5 as $,z as l,m as u,_ as G,cg as ea,a3 as y,a8 as ra,ci as na,bv as ia}from"./index.bb1074bf.js";import{u as oa,a as la}from"./useSize.13045e2c.js";function sa(s){var a=D();return J(function(){a.value=s()},{flush:"sync"}),a}var ca=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:K.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},ua=B({name:"AAvatar",inheritAttrs:!1,props:ca(),slots:["icon"],setup:function(a,b){var S=b.slots,i=b.attrs,d=_(!0),m=_(!1),h=_(1),o=_(null),x=_(null),j=H("avatar",a),p=j.prefixCls,A=oa(),n=U(function(){return a.size==="default"?A.value:a.size}),E=Y(),v=sa(function(){if(Z(a.size)==="object"){var t=aa.find(function(r){return E.value[r]}),e=a.size[t];return e}}),O=function(e){return v.value?{width:"".concat(v.value,"px"),height:"".concat(v.value,"px"),lineHeight:"".concat(v.value,"px"),fontSize:"".concat(e?v.value/2:18,"px")}:{}},f=function(){if(!(!o.value||!x.value)){var e=o.value.offsetWidth,r=x.value.offsetWidth;if(e!==0&&r!==0){var c=a.gap,P=c===void 0?4:c;P*2<r&&(h.value=r-P*2<e?(r-P*2)/e:1)}}},z=function(){var e=a.loadError,r=e==null?void 0:e();r!==!1&&(d.value=!1)};return W(function(){return a.src},function(){I(function(){d.value=!0,h.value=1})}),W(function(){return a.gap},function(){I(function(){f()})}),ta(function(){I(function(){f(),m.value=!0})}),function(){var t,e,r=a.shape,c=a.src,P=a.alt,F=a.srcset,L=a.draggable,M=a.crossOrigin,C=$(S,a,"icon"),g=p.value,q=(t={},l(t,"".concat(i.class),!!i.class),l(t,g,!0),l(t,"".concat(g,"-lg"),n.value==="large"),l(t,"".concat(g,"-sm"),n.value==="small"),l(t,"".concat(g,"-").concat(r),r),l(t,"".concat(g,"-image"),c&&d.value),l(t,"".concat(g,"-icon"),C),t),Q=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:C?"".concat(n.value/2,"px"):"18px"}:{},R=(e=S.default)===null||e===void 0?void 0:e.call(S),k;if(c&&d.value)k=u("img",{draggable:L,src:c,srcset:F,onError:z,alt:P,crossorigin:M},null);else if(C)k=C;else if(m.value||h.value!==1){var T="scale(".concat(h.value,") translateX(-50%)"),V={msTransform:T,WebkitTransform:T,transform:T},X=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};k=u(ea,{onResize:f},{default:function(){return[u("span",{class:"".concat(g,"-string"),ref:o,style:G(G({},X),V)},[R])]}})}else k=u("span",{class:"".concat(g,"-string"),ref:o,style:{opacity:0}},[R]);return u("span",y(y({},i),{},{ref:x,class:q,style:[Q,O(!!C),i.style]}),[k])}}}),w=ua,va=function(){return{prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"}}},fa=B({name:"AAvatarGroup",inheritAttrs:!1,props:va(),setup:function(a,b){var S=b.slots,i=b.attrs,d=H("avatar-group",a),m=d.prefixCls,h=d.direction;return la(a),function(){var o,x=a.maxPopoverPlacement,j=x===void 0?"top":x,p=a.maxCount,A=a.maxStyle,n=a.maxPopoverTrigger,E=n===void 0?"hover":n,v=(o={},l(o,m.value,!0),l(o,"".concat(m.value,"-rtl"),h.value==="rtl"),l(o,"".concat(i.class),!!i.class),o),O=$(S,a),f=ra(O).map(function(r,c){return na(r,{key:"avatar-key-".concat(c)})}),z=f.length;if(p&&p<z){var t=f.slice(0,p),e=f.slice(p,z);return t.push(u(ia,{key:"avatar-popover-key",content:e,trigger:E,placement:j,overlayClassName:"".concat(m.value,"-popover")},{default:function(){return[u(w,{style:A},{default:function(){return["+".concat(z-p)]}})]}})),u("div",y(y({},i),{},{class:v,style:i.style}),[t])}return u("div",y(y({},i),{},{class:v,style:i.style}),[f])}}}),N=fa;w.Group=N;w.install=function(s){return s.component(w.name,w),s.component(N.name,N),s};export{w as A,sa as e};
