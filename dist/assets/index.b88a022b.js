import{a as V,a4 as X,w as f,v as D,e as G,cs as J,ab as K,aO as Q,x as C,a1 as S,a0 as U,b5 as Y,z as o,m as g,_,cg as Z,a3 as A}from"./index.adfa4d48.js";import{u as $}from"./useSize.b4ee64c8.js";import{e as aa}from"./eagerComputed.05fda161.js";var ta=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:X.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},ea=V({name:"AAvatar",inheritAttrs:!1,props:ta(),slots:["icon"],setup:function(a,w){var x=w.slots,d=w.attrs,p=f(!0),k=f(!1),h=f(1),m=f(null),b=f(null),P=D("avatar",a),I=P.prefixCls,O=$(),n=G(function(){return a.size==="default"?O.value:a.size}),R=J(),l=aa(function(){if(K(a.size)==="object"){var e=Q.find(function(r){return R.value[r]}),t=a.size[e];return t}}),T=function(t){return l.value?{width:"".concat(l.value,"px"),height:"".concat(l.value,"px"),lineHeight:"".concat(l.value,"px"),fontSize:"".concat(t?l.value/2:18,"px")}:{}},y=function(){if(!(!m.value||!b.value)){var t=m.value.offsetWidth,r=b.value.offsetWidth;if(t!==0&&r!==0){var s=a.gap,c=s===void 0?4:s;c*2<r&&(h.value=r-c*2<t?(r-c*2)/t:1)}}},W=function(){var t=a.loadError,r=t==null?void 0:t();r!==!1&&(p.value=!1)};return C(function(){return a.src},function(){S(function(){p.value=!0,h.value=1})}),C(function(){return a.gap},function(){S(function(){y()})}),U(function(){S(function(){y(),k.value=!0})}),function(){var e,t,r=a.shape,s=a.src,c=a.alt,N=a.srcset,B=a.draggable,H=a.crossOrigin,v=Y(x,a,"icon"),i=I.value,F=(e={},o(e,"".concat(d.class),!!d.class),o(e,i,!0),o(e,"".concat(i,"-lg"),n.value==="large"),o(e,"".concat(i,"-sm"),n.value==="small"),o(e,"".concat(i,"-").concat(r),r),o(e,"".concat(i,"-image"),s&&p.value),o(e,"".concat(i,"-icon"),v),e),L=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:v?"".concat(n.value/2,"px"):"18px"}:{},j=(t=x.default)===null||t===void 0?void 0:t.call(x),u;if(s&&p.value)u=g("img",{draggable:B,src:s,srcset:N,onError:W,alt:c,crossorigin:H},null);else if(v)u=v;else if(k.value||h.value!==1){var z="scale(".concat(h.value,") translateX(-50%)"),M={msTransform:z,WebkitTransform:z,transform:z},q=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};u=g(Z,{onResize:y},{default:function(){return[g("span",{class:"".concat(i,"-string"),ref:m,style:_(_({},q),M)},[j])]}})}else u=g("span",{class:"".concat(i,"-string"),ref:m,style:{opacity:0}},[j]);return g("span",A(A({},d),{},{ref:b,class:F,style:[L,T(!!v),d.style]}),[u])}}}),sa=ea;export{sa as A};
